import requests
import json
import random

# ‚úÖ ‡∏™‡∏∏‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÇ‡∏û‡∏™‡∏ï‡πå (‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÑ‡∏î‡πâ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏¢‡πÜ)
captions = [
    "‡∏™‡∏£‡∏∏‡∏õ‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏ß‡∏±‡∏ô‡∏•‡∏∞‡∏´‡∏ô‡πâ‡∏≤ ‡∏≠‡πà‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢ ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡∏à‡∏£‡∏¥‡∏á ‚úÖ",
    "‡∏≠‡πà‡∏≤‡∏ô 3 ‡∏ô‡∏≤‡∏ó‡∏µ ‡πÑ‡∏î‡πâ‡πÑ‡∏≠‡πÄ‡∏î‡∏µ‡∏¢‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏±‡∏ô‡∏ó‡∏µ üí°",
    "‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡πà‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡πÄ‡∏•‡πà‡∏° ‡πÄ‡∏£‡∏≤‡∏™‡∏£‡∏∏‡∏õ‡πÉ‡∏´‡πâ‡πÅ‡∏•‡πâ‡∏ß üìö",
    "‡∏≠‡∏¢‡∏≤‡∏Å‡∏°‡∏µ‡πÑ‡∏≠‡πÄ‡∏î‡∏µ‡∏¢‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà ‚úÖ",
    "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏î‡∏µ‡πÜ ‡∏≠‡πà‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢ ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡∏à‡∏£‡∏¥‡∏á ‚ù§Ô∏è",
    "‡∏™‡∏£‡∏∏‡∏õ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡πÉ‡∏ô‡πÅ‡∏ö‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏á‡πà‡∏≤‡∏¢ ‡∏ó‡∏≥‡∏ï‡∏≤‡∏°‡πÑ‡∏î‡πâ‡∏à‡∏£‡∏¥‡∏á ‚ú®",
]

# ‚úÖ ‡πÇ‡∏´‡∏•‡∏î‡πÇ‡∏û‡∏™‡∏ï‡πå‡∏ó‡∏µ‡πà‡πÄ‡∏Ñ‡∏¢‡πÇ‡∏û‡∏™‡∏ï‡πå‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß
def load_posted():
    try:
        with open("posted_news.json", "r") as f:
            return json.load(f)
    except:
        return []

# ‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÇ‡∏û‡∏™‡∏ï‡πå‡∏ó‡∏µ‡πà‡πÇ‡∏û‡∏™‡∏ï‡πå‡πÅ‡∏•‡πâ‡∏ß
def save_posted(data):
    with open("posted_news.json", "w") as f:
        json.dump(data, f, indent=4, ensure_ascii=False)

# ‚úÖ Main
def main():
    posted = load_posted()

    # ‚úÖ ‡∏™‡∏∏‡πà‡∏°‡πÅ‡∏Ñ‡∏õ‡∏ä‡∏±‡πà‡∏ô 1 ‡∏≠‡∏±‡∏ô
    caption = random.choice(captions)

    # ‚úÖ ‡πÇ‡∏û‡∏™‡∏ï‡πå‡πÑ‡∏õ Facebook ‡∏î‡πâ‡∏ß‡∏¢ Graph API
    page_id = "YOUR_PAGE_ID"
    access_token = "YOUR_PAGE_ACCESS_TOKEN"
    url = f"https://graph.facebook.com/{page_id}/feed"

    data = {
        "message": caption,
        "access_token": access_token
    }

    response = requests.post(url, data=data)
    
    if response.status_code == 200:
        print("‚úÖ ‡πÇ‡∏û‡∏™‡∏ï‡πå‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à:", caption)
        posted.append(caption)
        save_posted(posted)
    else:
        print("‚ùå ‡πÇ‡∏û‡∏™‡∏ï‡πå‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß:", response.text)

if __name__ == "__main__":
    main()
